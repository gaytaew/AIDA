/**
 * Universe Parameters Schema
 * 
 * Полная схема настраиваемых параметров для формирования "вселенной" съёмки.
 * Каждый параметр влияет на итоговый промпт, который собирается через narrativeBuilder.
 * 
 * Структура:
 * - APPROACH: Подача съёмки (кто снимает, приоритет продукта)
 * - TECH: Техника (камера, экспозиция, обработка)
 * - ERA: Эпоха и культурный контекст
 * - COLOR: Цвет и колор-грейдинг
 * - LENS: Оптика и перспектива
 * - MOOD: Настроение и энергия
 * - ANTIAI: Настройки реализма
 */

// ═══════════════════════════════════════════════════════════════
// БЛОК 1: ПОДАЧА (Shooting Approach)
// ═══════════════════════════════════════════════════════════════

const SHOOTING_APPROACH = {
  id: 'shootingApproach',
  label: 'Подача съёмки',
  description: 'Кто держит камеру и как взаимодействует с моделью',
  options: [
    { 
      value: 'friend_casual', 
      label: 'Друг с камерой', 
      desc: 'Непринуждённо, как будто снимает друг на тусовке',
      narrative: "Съёмка строится на ощущении 'друга с камерой' — непринуждённо, без официоза"
    },
    { 
      value: 'professional_controlled', 
      label: 'Профессионал', 
      desc: 'Контролируемая студийная/editorial съёмка',
      narrative: "Профессиональная контролируемая съёмка с чётким видением и режиссурой"
    },
    { 
      value: 'paparazzi_voyeur', 
      label: 'Папарацци', 
      desc: 'Подсмотренный момент, telephoto, без контакта',
      narrative: "Папарацци-стиль: подсмотренный момент издалека, без контакта с моделью"
    },
    { 
      value: 'self_portrait', 
      label: 'Селфи/Автопортрет', 
      desc: 'Модель сама держит камеру',
      narrative: "Автопортрет/селфи: модель сама контролирует камеру, интимный контакт с объективом"
    },
    { 
      value: 'documentary', 
      label: 'Документальный', 
      desc: 'Фотожурналистика, наблюдение без вмешательства',
      narrative: "Документальный подход: камера наблюдает, не вмешиваясь в происходящее"
    },
    { 
      value: 'art_conceptual', 
      label: 'Арт/Концептуальный', 
      desc: 'Постановочный fine art',
      narrative: "Концептуальная арт-съёмка с полной постановкой и художественным замыслом"
    }
  ]
};

const PRODUCT_DISCIPLINE = {
  id: 'productDiscipline',
  label: 'Приоритет продукта',
  description: 'Насколько продукт важнее остального в кадре',
  options: [
    { 
      value: 'product_absolute', 
      label: 'Продукт — абсолют', 
      desc: 'Продукт ВСЕГДА резкий, читаемый, форма не искажена',
      narrative: ", но с абсолютной дисциплиной продуктовой кампании: продукт ВСЕГДА резкий, читаемый по форме и материалу"
    },
    { 
      value: 'product_primary', 
      label: 'Продукт важнее', 
      desc: 'Продукт приоритетен, но допускается художественная свобода',
      narrative: ", с приоритетом продукта: он должен быть читаем, но допускается художественная свобода"
    },
    { 
      value: 'balanced', 
      label: 'Баланс', 
      desc: 'Модель и продукт равноважны',
      narrative: ", с балансом между моделью и продуктом — оба равноважны"
    },
    { 
      value: 'atmosphere_first', 
      label: 'Атмосфера важнее', 
      desc: 'Настроение важнее чёткости продукта',
      narrative: ", где атмосфера и настроение важнее технической чёткости продукта"
    },
    { 
      value: 'model_first', 
      label: 'Модель важнее', 
      desc: 'Портрет модели, продукт как контекст',
      narrative: ", с фокусом на модели — продукт выступает контекстом"
    }
  ]
};

// ═══════════════════════════════════════════════════════════════
// БЛОК 2: ТЕХНИКА (Tech)
// ═══════════════════════════════════════════════════════════════

const CAMERA_CLASS = {
  id: 'cameraClass',
  label: 'Класс камеры',
  description: 'Технический уровень и характер камеры',
  options: [
    { 
      value: 'high_dr_professional', 
      label: 'Профи High DR', 
      desc: 'Canon R5 / Sony A1 / Nikon Z8 — широкий ДД',
      narrative: "Камера — цифровая с высоким динамическим диапазоном (уровня Canon R5 / Sony A1), чтобы удерживать и яркие хайлайты, и глубокие тени"
    },
    { 
      value: 'prosumer_balanced', 
      label: 'Продвинутый', 
      desc: 'Canon 5D / Sony A7 — хороший баланс',
      narrative: "Камера — цифровая среднего класса (Canon 5D / Sony A7) с хорошим балансом характеристик"
    },
    { 
      value: 'consumer_limited', 
      label: 'Потребительский', 
      desc: 'Ограниченный ДД, могут быть пересветы',
      narrative: "Камера потребительского класса с ограниченным динамическим диапазоном — пересветы и провалы теней возможны"
    },
    { 
      value: 'film_professional', 
      label: 'Плёнка профи', 
      desc: 'Hasselblad, Mamiya, Contax — плёночный look',
      narrative: "Профессиональная плёночная камера (Hasselblad / Mamiya / Contax) с характерным плёночным рендерингом"
    },
    { 
      value: 'film_consumer', 
      label: 'Плёнка потребительская', 
      desc: 'Canon AE-1, Olympus — любительская плёнка',
      narrative: "Потребительская плёночная камера (Canon AE-1 / Olympus) с мягким, ностальгическим рендерингом"
    },
    { 
      value: 'phone_computational', 
      label: 'Смартфон', 
      desc: 'Computational photography, HDR-слияние',
      narrative: "Смартфон с computational photography — HDR-слияние, резкость везде, характерная обработка"
    },
    { 
      value: 'toy_lofi', 
      label: 'Toy / Lo-Fi', 
      desc: 'Holga, Lomo — виньетки, утечки света',
      narrative: "Toy-камера (Holga / Lomo) с виньетками, утечками света и непредсказуемым результатом"
    },
    { 
      value: 'instant_polaroid', 
      label: 'Instant / Polaroid', 
      desc: 'Мгновенная печать, специфичный цвет',
      narrative: "Polaroid / Instax с характерной мгновенной печатью, специфичными цветами и мягкой детализацией"
    },
    { 
      value: 'disposable', 
      label: 'Одноразовая', 
      desc: 'Disposable camera — вспышка, зерно',
      narrative: "Одноразовая камера с жёсткой встроенной вспышкой, зернистостью и ограниченной оптикой"
    }
  ]
};

const EXPOSURE_INTENT = {
  id: 'exposureIntent',
  label: 'Экспозиция',
  description: 'Намерение по экспозиции (недо/пере)',
  options: [
    { 
      value: 'underexposed_heavy', 
      label: '-1 / -0.7', 
      desc: 'Сильное недодержание — плотные тени',
      narrative: "Экспозиция с сильным недодержанием (-1/-0.7) — плотные тени, сохранённые хайлайты, драматичность"
    },
    { 
      value: 'underexposed_slight', 
      label: '-0.3', 
      desc: 'Лёгкое недодержание — насыщенность',
      narrative: "Экспозиция с лёгким недодержанием (-0.3) — насыщенность не распадается в хайлайтах, небо остаётся глубоким"
    },
    { 
      value: 'neutral', 
      label: '0 (нейтральная)', 
      desc: 'Нейтральная экспозиция',
      narrative: "Нейтральная экспозиция — баланс между тенями и хайлайтами"
    },
    { 
      value: 'overexposed_slight', 
      label: '+0.3 / +0.5', 
      desc: 'Лёгкий пересвет — воздушность',
      narrative: "Экспозиция с лёгким пересветом (+0.3/+0.5) — воздушность, мягкость, приподнятые тени"
    },
    { 
      value: 'overexposed_heavy', 
      label: '+1', 
      desc: 'Сильный пересвет — выбитые хайлайты',
      narrative: "Экспозиция с сильным пересветом (+1) — выбитые хайлайты как художественный приём, dreamy эффект"
    }
  ]
};

const SHUTTER_INTENT = {
  id: 'shutterIntent',
  label: 'Движение / Выдержка',
  description: 'Как передаётся движение в кадре',
  options: [
    { 
      value: 'freeze_all', 
      label: 'Заморозить всё', 
      desc: '1/1000+ — всё резко',
      narrative: "Короткая выдержка (1/1000+) для заморозки всего движения — всё в кадре резко"
    },
    { 
      value: 'subject_sharp_bg_motion', 
      label: 'Субъект резко, фон в движении', 
      desc: 'Паннинг',
      narrative: "Приём 'субъект резкий, мир живой': короткая выдержка для продукта, допускаемый смаз фона за счёт паннинга"
    },
    { 
      value: 'micro_motion', 
      label: 'Микродвижение', 
      desc: 'Лёгкий смаз рук/волос',
      narrative: "Допускается лёгкое микродвижение: смаз рук, волос, аксессуаров от ветра — но продукт остаётся резким"
    },
    { 
      value: 'motion_blur_artistic', 
      label: 'Художественный смаз', 
      desc: 'Длинная выдержка как приём',
      narrative: "Длинная выдержка как художественный приём — смаз передаёт энергию и движение"
    },
    { 
      value: 'mixed', 
      label: 'Смешанный', 
      desc: 'Комбинация резкости и смаза',
      narrative: "Смешанная техника: часть кадра резко (вспышка), часть в движении (ambient)"
    }
  ]
};

const PROCESSING_STYLE = {
  id: 'processingStyle',
  label: 'Обработка',
  description: 'Стиль постобработки и цветокоррекции',
  options: [
    { 
      value: 'punchy_contrasty', 
      label: 'Сочный контрастный', 
      desc: 'Высокий микроконтраст, насыщенные цвета',
      narrative: "Обработка сочная, контрастная, с высоким микроконтрастом и видимой текстурой"
    },
    { 
      value: 'matte_editorial', 
      label: 'Матовый editorial', 
      desc: 'Приподнятые тени, мягкий контраст',
      narrative: "Обработка матовая editorial — приподнятые тени, мягкий контраст, современный журнальный look"
    },
    { 
      value: 'film_scan_vibe', 
      label: 'Скан плёнки', 
      desc: 'Зерно, царапки, пыль как от скана',
      narrative: "Обработка под скан плёнки: добавленное зерно 35mm-скана, лёгкие микро-царапки/пыль как 'скан-вайб'"
    },
    { 
      value: 'clean_digital', 
      label: 'Чистый цифровой', 
      desc: 'Минимальная стилизация',
      narrative: "Чистая цифровая обработка без стилизации — технически безупречно, нейтрально"
    },
    { 
      value: 'cross_process', 
      label: 'Кросс-процесс', 
      desc: 'Сдвинутые цвета, неожиданные оттенки',
      narrative: "Кросс-процесс: сдвинутые цвета, неожиданные оттенки, экспериментальный look"
    },
    { 
      value: 'vintage_fade', 
      label: 'Винтажный fade', 
      desc: 'Выцветшие цвета, низкий контраст',
      narrative: "Винтажный fade — выцветшие цвета, пониженный контраст, ностальгический look"
    },
    { 
      value: 'hdr_aggressive', 
      label: 'HDR агрессивный', 
      desc: 'Всё видно, неестественно',
      narrative: "Агрессивный HDR — детали везде, приподнятые тени, приглушённые хайлайты, неестественно плоский"
    }
  ]
};

const RETOUCH_LEVEL = {
  id: 'retouchLevel',
  label: 'Ретушь',
  description: 'Уровень ретуши кожи и дефектов',
  options: [
    { 
      value: 'none', 
      label: 'Никакой', 
      desc: 'Raw, как снято — поры, морщины видны',
      narrative: "Без ретуши — поры, пушок, живые тени, морщины, всё как в жизни"
    },
    { 
      value: 'minimal', 
      label: 'Минимальная', 
      desc: 'Убрать случайные отвлекающие элементы',
      narrative: "Ретушь минимальная: убрать случайные отвлекающие элементы, сохранить поры и текстуру кожи"
    },
    { 
      value: 'moderate', 
      label: 'Умеренная', 
      desc: 'Чистая кожа, но с текстурой',
      narrative: "Умеренная ретушь: чистая кожа с сохранённой текстурой, естественный вид"
    },
    { 
      value: 'polished', 
      label: 'Полированная', 
      desc: 'Гладкая кожа, убраны все дефекты',
      narrative: "Полированная ретушь: гладкая кожа, убраны дефекты, глянцевый коммерческий вид"
    }
  ]
};

// ═══════════════════════════════════════════════════════════════
// БЛОК 3: ЭПОХА (Era)
// ═══════════════════════════════════════════════════════════════

const DECADE = {
  id: 'decade',
  label: 'Декада',
  description: 'Визуальная эпоха съёмки',
  options: [
    { 
      value: '70s', 
      label: '70s', 
      desc: 'Зерно, тёплые тона, мягкий фокус',
      narrative: "Эстетика 70-х: крупное зерно, тёплые золотистые тона, мягкий фокус, аналоговая теплота"
    },
    { 
      value: '80s', 
      label: '80s', 
      desc: 'Яркие цвета, вспышка, глянец',
      narrative: "Эстетика 80-х: яркие насыщенные цвета, прямая вспышка, глянцевый look, геометрия"
    },
    { 
      value: '90s', 
      label: '90s', 
      desc: 'Гранж, candid, natural light',
      narrative: "Эстетика 90-х: гранж, candid моменты, естественный свет, desaturated тона, честность"
    },
    { 
      value: 'y2k', 
      label: 'Y2K (2000-2005)', 
      desc: 'Ранняя цифра, вспышка, plastic fantastic',
      narrative: "Эстетика Y2K: ранняя цифра, жёсткая вспышка, plastic fantastic, глянцевый блеск, кислотные акценты"
    },
    { 
      value: '2010s', 
      label: '2010s', 
      desc: 'Instagram-эра, VSCO, приподнятые тени',
      narrative: "Эстетика 2010-х: Instagram-эра, VSCO-фильтры, приподнятые тени, пастельные тона"
    },
    { 
      value: 'contemporary', 
      label: 'Contemporary', 
      desc: 'Современный, без явной стилизации',
      narrative: "Современная эстетика без явной стилизации под конкретную эпоху"
    }
  ]
};

const CULTURAL_CONTEXT = {
  id: 'culturalContext',
  label: 'Культурный контекст',
  description: 'Тип издания / медиа',
  options: [
    { 
      value: 'magazine_editorial', 
      label: 'Журнальный editorial', 
      desc: 'i-D, Dazed, Vogue Italia',
      narrative: "Визуальный язык журнального editorial (i-D / Dazed / Vogue Italia)"
    },
    { 
      value: 'ad_campaign', 
      label: 'Рекламная кампания', 
      desc: 'Nike, Supreme — чёткий продуктовый фокус',
      narrative: "Рекламная кампания с продуктовой ясностью уровня Nike / Supreme print ads"
    },
    { 
      value: 'ugc_social', 
      label: 'UGC / Social', 
      desc: 'TikTok, Instagram — "реальный" контент',
      narrative: "UGC/социальный контент — TikTok/Instagram-ритм, 'реальный' контент от пользователей"
    },
    { 
      value: 'street_documentary', 
      label: 'Street / Документальный', 
      desc: 'Уличная фотография, наблюдение',
      narrative: "Уличная/документальная фотография — наблюдение за реальностью без постановки"
    },
    { 
      value: 'fine_art', 
      label: 'Fine Art', 
      desc: 'Галерейная, концептуальная',
      narrative: "Fine art / галерейная фотография с концептуальным замыслом"
    },
    { 
      value: 'catalog_ecom', 
      label: 'Каталог / E-com', 
      desc: 'Чистые коммерческие снимки',
      narrative: "Каталожная/e-commerce съёмка — чистые коммерческие снимки с фокусом на продукте"
    },
    { 
      value: 'lookbook', 
      label: 'Lookbook', 
      desc: 'Презентация коллекции',
      narrative: "Lookbook — презентация коллекции с балансом продукта и настроения"
    }
  ]
};

// ═══════════════════════════════════════════════════════════════
// БЛОК 4: ЦВЕТ (Color)
// ═══════════════════════════════════════════════════════════════

const WHITE_BALANCE = {
  id: 'whiteBalance',
  label: 'Баланс белого',
  description: 'Температура света',
  options: [
    { 
      value: 'warm_tungsten', 
      label: 'Тёплый (tungsten)', 
      desc: '3200K — оранжевые тона',
      narrative: "Баланс белого тёплый (около 3200K) — оранжевые, янтарные тона"
    },
    { 
      value: 'warm_golden', 
      label: 'Золотой час', 
      desc: '4500K — тёплый, но не оранжевый',
      narrative: "Баланс белого золотой час (около 4500K) — тёплый, но не оранжевый"
    },
    { 
      value: 'neutral', 
      label: 'Нейтральный', 
      desc: '5500K — естественный дневной',
      narrative: "Нейтральный баланс белого (5500K) — естественный дневной свет"
    },
    { 
      value: 'cool_daylight', 
      label: 'Холодный daylight', 
      desc: '6500K+ — синеватые тени',
      narrative: "Баланс белого холодный (5200-6500K) — небо плотное, тени прохладные"
    },
    { 
      value: 'mixed', 
      label: 'Смешанный', 
      desc: 'Разные источники — намеренный разнобой',
      narrative: "Смешанный баланс белого — разные источники света создают цветовой контраст"
    }
  ]
};

const WB_SHIFT = {
  id: 'wbShift',
  label: 'Сдвиг WB',
  description: 'Дополнительный сдвиг цвета',
  options: [
    { value: 'none', label: 'Без сдвига', desc: '', narrative: "" },
    { 
      value: 'teal', 
      label: '→ Teal', 
      desc: 'Холодные тени, циан',
      narrative: "со сдвигом в циан/teal в тенях"
    },
    { 
      value: 'magenta', 
      label: '→ Magenta', 
      desc: 'Розоватые тона',
      narrative: "со сдвигом в magenta/розовые тона"
    },
    { 
      value: 'green', 
      label: '→ Green', 
      desc: 'Зеленоватый оттенок',
      narrative: "со сдвигом в зелёный"
    }
  ]
};

const SATURATION = {
  id: 'saturation',
  label: 'Насыщенность',
  description: 'Интенсивность цветов',
  options: [
    { 
      value: 'punchy_high', 
      label: 'Высокая / Punchy', 
      desc: 'Яркие, сочные цвета',
      narrative: "Насыщенность высокая — сочные, 'солнечно-громкие' цвета"
    },
    { 
      value: 'natural', 
      label: 'Естественная', 
      desc: 'Как в жизни',
      narrative: "Насыщенность естественная — как видит глаз"
    },
    { 
      value: 'muted', 
      label: 'Приглушённая', 
      desc: 'Пастельные, мягкие тона',
      narrative: "Насыщенность приглушённая — пастельные, мягкие тона"
    },
    { 
      value: 'desaturated', 
      label: 'Обесцвеченная', 
      desc: 'Почти ч/б с намёком на цвет',
      narrative: "Насыщенность низкая — почти ч/б с намёком на цвет"
    },
    { 
      value: 'selective', 
      label: 'Селективная', 
      desc: 'Один цвет яркий, остальные приглушены',
      narrative: "Насыщенность селективная — акцентный цвет яркий, остальные приглушены"
    }
  ]
};

const CONTRAST_CURVE = {
  id: 'contrastCurve',
  label: 'Контраст',
  description: 'Тип контрастной кривой',
  options: [
    { 
      value: 's_curve_high', 
      label: 'S-кривая высокая', 
      desc: 'Глубокие тени, яркие хайлайты',
      narrative: "S-образная кривая с глубокими тенями и яркими хайлайтами"
    },
    { 
      value: 's_curve_moderate', 
      label: 'S-кривая умеренная', 
      desc: 'Классический контраст',
      narrative: "Умеренная S-кривая — классический контраст"
    },
    { 
      value: 'linear', 
      label: 'Линейный', 
      desc: 'Без коррекции кривой',
      narrative: "Линейная кривая — без контрастной коррекции"
    },
    { 
      value: 'flat_lifted', 
      label: 'Плоский / Lifted', 
      desc: 'Приподнятые тени, плоский',
      narrative: "Плоская кривая с приподнятыми тенями — детали везде, но без глубины"
    },
    { 
      value: 'crushed_blacks', 
      label: 'Crushed blacks', 
      desc: 'Провалённый чёрный',
      narrative: "Crushed blacks — провалённые в чёрный тени для драмы"
    }
  ]
};

const SHADOW_TONE = {
  id: 'shadowTone',
  label: 'Тон теней',
  description: 'Цвет в тенях',
  options: [
    { value: 'neutral', label: 'Нейтральный', desc: '', narrative: "" },
    { 
      value: 'cool_teal', 
      label: 'Холодный / Teal', 
      desc: 'Циановые тени',
      narrative: "Тени холодные, с teal-оттенком"
    },
    { 
      value: 'warm', 
      label: 'Тёплый', 
      desc: 'Коричневые, оранжевые тени',
      narrative: "Тени тёплые, коричневатые"
    },
    { 
      value: 'purple', 
      label: 'Фиолетовый', 
      desc: 'Пурпурные тени',
      narrative: "Тени с фиолетовым оттенком"
    }
  ]
};

const HIGHLIGHT_TONE = {
  id: 'highlightTone',
  label: 'Тон хайлайтов',
  description: 'Характер светлых участков',
  options: [
    { 
      value: 'clean', 
      label: 'Чистые', 
      desc: 'Белые без оттенка',
      narrative: "Хайлайты чистые, без цветного оттенка"
    },
    { 
      value: 'creamy', 
      label: 'Кремовые', 
      desc: 'Тёплый, мягкий свет',
      narrative: "Хайлайты кремовые, с мягким тёплым оттенком"
    },
    { 
      value: 'clipped_artistic', 
      label: 'Выбитые (худож.)', 
      desc: 'Намеренные пересветы',
      narrative: "Допускается намеренный клиппинг хайлайтов как художественный акцент"
    },
    { 
      value: 'cool', 
      label: 'Холодные', 
      desc: 'Голубоватые хайлайты',
      narrative: "Хайлайты холодные, голубоватые"
    }
  ]
};

// ═══════════════════════════════════════════════════════════════
// БЛОК 5: ОПТИКА (Lens)
// ═══════════════════════════════════════════════════════════════

const FOCAL_RANGE = {
  id: 'focalRange',
  label: 'Фокусное расстояние',
  description: 'Тип объектива по углу охвата',
  options: [
    { 
      value: 'fisheye', 
      label: 'Fisheye (8-16mm)', 
      desc: 'Экстремальное искажение, всё гигантское',
      narrative: "Ключевой оптический язык — фишай (8-16mm) с агрессивной перспективой и изгибом линий"
    },
    { 
      value: 'ultrawide', 
      label: 'Ультраширик (12-24mm)', 
      desc: 'Агрессивная перспектива, искажения',
      narrative: "Ультраширокий объектив (12-24mm) для агрессивной перспективы и контекста"
    },
    { 
      value: 'wide', 
      label: 'Широкий (24-35mm)', 
      desc: 'Контекст + субъект, лёгкие искажения',
      narrative: "Широкоугольник (24-35mm) — баланс контекста и субъекта с лёгкими искажениями"
    },
    { 
      value: 'standard', 
      label: 'Стандартный (35-50mm)', 
      desc: 'Как видит глаз',
      narrative: "Стандартный объектив (35-50mm) — перспектива близка к человеческому глазу"
    },
    { 
      value: 'portrait', 
      label: 'Портретный (85-105mm)', 
      desc: 'Сжатие перспективы, красивое боке',
      narrative: "Портретный объектив (85-105mm) — сжатие перспективы, красивое боке, льстящие пропорции"
    },
    { 
      value: 'telephoto', 
      label: 'Телефото (135-200mm)', 
      desc: 'Сильное сжатие, отделение от фона',
      narrative: "Телефото (135-200mm) — сильное сжатие перспективы, полное отделение от фона"
    },
    { 
      value: 'super_telephoto', 
      label: 'Супер-телефото (300mm+)', 
      desc: 'Папарацци, полное сжатие',
      narrative: "Супер-телефото (300mm+) — папарацци-дистанция, плоская перспектива, полная изоляция"
    }
  ]
};

const APERTURE_INTENT = {
  id: 'apertureIntent',
  label: 'Диафрагма / DOF',
  description: 'Глубина резкости',
  options: [
    { 
      value: 'wide_open', 
      label: 'Открытая (f/1.4-2.8)', 
      desc: 'Минимальная DOF, размытый фон',
      narrative: "Диафрагма открытая (f/1.4-2.8) — минимальная глубина резкости, фон в сильном размытии"
    },
    { 
      value: 'moderate', 
      label: 'Средняя (f/4-5.6)', 
      desc: 'Баланс резкости и боке',
      narrative: "Диафрагма средняя (f/4-5.6) — баланс резкости субъекта и мягкого боке"
    },
    { 
      value: 'closed', 
      label: 'Закрытая (f/8-11)', 
      desc: 'Большая DOF, всё читаемо',
      narrative: "Диафрагма закрытая (f/8-11) — большая глубина резкости, субъект и контекст читаемы одновременно"
    },
    { 
      value: 'deep', 
      label: 'Максимальная (f/16+)', 
      desc: 'Всё в резкости',
      narrative: "Диафрагма максимально закрытая (f/16+) — всё в резкости от переднего плана до горизонта"
    }
  ]
};

const DISTORTION_POLICY = {
  id: 'distortionPolicy',
  label: 'Политика дисторсии',
  description: 'Как обращаться с оптическими искажениями',
  options: [
    { 
      value: 'embrace', 
      label: 'Использовать', 
      desc: 'Искажения как художественный приём',
      narrative: "Дисторсия разрешена и используется как художественный приём — линии гнутся"
    },
    { 
      value: 'control', 
      label: 'Контролировать', 
      desc: 'Продукт не у края, форма читаема',
      narrative: "Дисторсия контролируется: продукт в зоне оптической силы, форма читаема, не у края"
    },
    { 
      value: 'avoid', 
      label: 'Избегать', 
      desc: 'Минимальные искажения, коррекция',
      narrative: "Дисторсия минимальна или скорректирована — чистые линии без искажений"
    }
  ]
};

const CAMERA_PROXIMITY = {
  id: 'cameraProximity',
  label: 'Дистанция до камеры',
  description: 'Насколько близко камера к субъекту',
  options: [
    { 
      value: 'intimate', 
      label: 'Интимная (10-30см)', 
      desc: 'Камера почти касается, объект гигантский',
      narrative: "Камера в 10-30 см от субъекта — экстремальная близость, объект доминирует"
    },
    { 
      value: 'close', 
      label: 'Близко (30-100см)', 
      desc: 'Портрет, детали',
      narrative: "Камера близко (30-100 см) — портретная дистанция, видны детали"
    },
    { 
      value: 'medium', 
      label: 'Средняя (1-3м)', 
      desc: 'Ростовой, контекст',
      narrative: "Средняя дистанция (1-3 м) — ростовой план с контекстом"
    },
    { 
      value: 'distant', 
      label: 'Далеко (3м+)', 
      desc: 'Общий план, среда',
      narrative: "Дистанция далёкая (3 м+) — общий план, среда важнее субъекта"
    }
  ]
};

// ═══════════════════════════════════════════════════════════════
// БЛОК 6: ВИЗУАЛЬНАЯ АТМОСФЕРА (Visual Mood)
// Определяет КАК ВЫГЛЯДИТ кадр, а НЕ эмоцию модели
// ═══════════════════════════════════════════════════════════════

const VISUAL_MOOD = {
  id: 'visualMood',
  label: 'Визуальная атмосфера',
  description: 'Общий вайб и визуальное ощущение кадра (НЕ эмоция модели)',
  options: [
    { 
      value: 'playful_summer', 
      label: 'Игривый / Летний', 
      desc: 'Яркие цвета, тёплый свет, ощущение жары',
      narrative: "Визуальная атмосфера игривая, летняя: яркие насыщенные цвета, тёплый золотистый свет, ощущение жары и беззаботности"
    },
    { 
      value: 'confident_bold', 
      label: 'Уверенный / Дерзкий', 
      desc: 'Контрастный, чёткий, сильный',
      narrative: "Визуальная атмосфера уверенная, дерзкая: высокий контраст, чёткие линии, сильная композиция, доминирующие формы"
    },
    { 
      value: 'melancholic_romantic', 
      label: 'Меланхоличный', 
      desc: 'Мягкий свет, приглушённые тона',
      narrative: "Визуальная атмосфера меланхоличная: мягкий рассеянный свет, приглушённые пастельные тона, лёгкая дымка"
    },
    { 
      value: 'edgy_raw', 
      label: 'Острый / Raw', 
      desc: 'Жёсткие тени, грязные текстуры',
      narrative: "Визуальная атмосфера острая, raw: жёсткие контрастные тени, грязные текстуры, несовершенства видны"
    },
    { 
      value: 'serene_calm', 
      label: 'Спокойный', 
      desc: 'Мягкий, ровный, медитативный',
      narrative: "Визуальная атмосфера спокойная: мягкий ровный свет, низкий контраст, приглушённые цвета, минимализм"
    },
    { 
      value: 'energetic_dynamic', 
      label: 'Энергичный', 
      desc: 'Динамичные углы, motion blur',
      narrative: "Визуальная атмосфера энергичная: динамичные углы камеры, возможен motion blur, яркие акценты"
    },
    { 
      value: 'sensual', 
      label: 'Чувственный', 
      desc: 'Тёплые тона, мягкий фокус',
      narrative: "Визуальная атмосфера чувственная: тёплые телесные тона, мягкий фокус, интимное освещение"
    },
    { 
      value: 'mysterious', 
      label: 'Загадочный', 
      desc: 'Тёмные участки, недосказанность',
      narrative: "Визуальная атмосфера загадочная: глубокие тени, части кадра скрыты в темноте, драматичный свет"
    },
    { 
      value: 'fresh_clean', 
      label: 'Свежий / Чистый', 
      desc: 'Светлый, воздушный, минималистичный',
      narrative: "Визуальная атмосфера свежая, чистая: много белого и светлого, воздушность, минимум теней"
    },
    { 
      value: 'gritty_urban', 
      label: 'Гритти / Городской', 
      desc: 'Урбан, бетон, неон',
      narrative: "Визуальная атмосфера гритти, урбан: городские текстуры, бетон, неоновые акценты, ночь или сумерки"
    }
  ]
};

const ENERGY_LEVEL = {
  id: 'energyLevel',
  label: 'Уровень энергии',
  description: 'Интенсивность энергии в кадре',
  options: [
    { 
      value: 'explosive', 
      label: 'Взрывной', 
      desc: 'Максимальный драйв',
      narrative: "Энергия взрывная — максимальный драйв, пиковый момент"
    },
    { 
      value: 'high', 
      label: 'Высокий', 
      desc: 'Активный, динамичный',
      narrative: "Энергия высокая — активно, динамично, живо"
    },
    { 
      value: 'medium', 
      label: 'Средний', 
      desc: 'Спокойный, но не статичный',
      narrative: "Энергия средняя — спокойно, но не статично"
    },
    { 
      value: 'low', 
      label: 'Низкий', 
      desc: 'Тихий, созерцательный',
      narrative: "Энергия низкая — тихо, созерцательно, медленно"
    }
  ]
};

const SPONTANEITY = {
  id: 'spontaneity',
  label: 'Спонтанность',
  description: 'Постановка vs candid',
  options: [
    { 
      value: 'candid', 
      label: 'Candid', 
      desc: 'Пойманный момент, не позирует',
      narrative: "Спонтанность максимальная — пойманный момент, модель не позирует"
    },
    { 
      value: 'semi_candid', 
      label: 'Полу-candid', 
      desc: 'Знает о камере, но не старается',
      narrative: "Полу-candid: модель знает о камере, но не старается, естественные микромоменты"
    },
    { 
      value: 'relaxed_posed', 
      label: 'Расслабленная постановка', 
      desc: 'Позирует, но естественно',
      narrative: "Расслабленная постановка: модель позирует, но сохраняет естественность"
    },
    { 
      value: 'editorial_posed', 
      label: 'Editorial постановка', 
      desc: 'Явные позы, как в журнале',
      narrative: "Editorial постановка: явные позы, режиссура, как в глянцевом журнале"
    },
    { 
      value: 'conceptual', 
      label: 'Концептуальная', 
      desc: 'Полностью поставленная сцена',
      narrative: "Концептуальная постановка: полностью срежиссированная сцена"
    }
  ]
};

const PRIMARY_FOCUS = {
  id: 'primaryFocus',
  label: 'Главный фокус',
  description: 'Что главное в кадре',
  options: [
    { 
      value: 'product', 
      label: 'Продукт', 
      desc: 'Продукт — герой кадра',
      narrative: "Продуктовый фокус: продукт — главный герой кадра"
    },
    { 
      value: 'model', 
      label: 'Модель', 
      desc: 'Модель — главный герой',
      narrative: "Модельный фокус: модель — главный герой кадра"
    },
    { 
      value: 'atmosphere', 
      label: 'Атмосфера', 
      desc: 'Настроение важнее объектов',
      narrative: "Атмосферный фокус: настроение и среда важнее конкретных объектов"
    },
    { 
      value: 'balanced', 
      label: 'Сбалансированный', 
      desc: 'Всё равноважно',
      narrative: "Сбалансированный фокус: продукт, модель и атмосфера равноважны"
    }
  ]
};

// ═══════════════════════════════════════════════════════════════
// БЛОК 7: ОСВЕЩЕНИЕ (Lighting) — НЕ ЗАВИСИТ ОТ ПОЗЫ
// Эти параметры ОБЯЗАТЕЛЬНЫ для консистентности между кадрами
// ═══════════════════════════════════════════════════════════════

const LIGHT_SOURCE = {
  id: 'lightSource',
  label: 'Источник света',
  description: 'Основной источник освещения в сцене',
  options: [
    { 
      value: 'direct_sun', 
      label: 'Прямое солнце', 
      desc: 'Жёсткие тени, высокий контраст',
      narrative: "Прямой солнечный свет — жёсткие тени, чёткие границы, высокий контраст"
    },
    { 
      value: 'golden_hour', 
      label: 'Golden hour', 
      desc: 'Тёплый боковой свет, мягкие тени',
      narrative: "Освещение golden hour — тёплый косой свет (за 1-2 часа до заката), длинные мягкие тени, золотистые тона"
    },
    { 
      value: 'blue_hour', 
      label: 'Blue hour', 
      desc: 'Холодный свет после заката',
      narrative: "Освещение blue hour — холодный рассеянный свет сразу после заката, синеватые тона"
    },
    { 
      value: 'overcast', 
      label: 'Пасмурно', 
      desc: 'Мягкий рассеянный свет, нет теней',
      narrative: "Пасмурное небо — мягкий рассеянный свет без жёстких теней, ровное освещение"
    },
    { 
      value: 'open_shade', 
      label: 'Открытая тень', 
      desc: 'Мягкий свет в тени от здания',
      narrative: "Открытая тень — субъект в тени (здания, дерева), но освещён отражённым небом"
    },
    { 
      value: 'window_light', 
      label: 'Свет из окна', 
      desc: 'Мягкий направленный свет',
      narrative: "Свет из окна — мягкий направленный свет с одной стороны, плавный переход в тень"
    },
    { 
      value: 'studio_soft', 
      label: 'Студийный мягкий', 
      desc: 'Контролируемый софтбокс',
      narrative: "Студийный мягкий свет — софтбоксы/октобоксы, контролируемое освещение без жёстких теней"
    },
    { 
      value: 'studio_hard', 
      label: 'Студийный жёсткий', 
      desc: 'Направленный свет, резкие тени',
      narrative: "Студийный жёсткий свет — направленные источники, резкие контрастные тени"
    },
    { 
      value: 'flash_fill', 
      label: 'Вспышка/заполнение', 
      desc: 'Вспышка для заполнения теней',
      narrative: "Вспышка как заполняющий свет — убирает жёсткие тени от солнца, выравнивает освещение"
    },
    { 
      value: 'practicals', 
      label: 'Практические источники', 
      desc: 'Лампы, неон, витрины в кадре',
      narrative: "Практические источники в кадре — лампы, неоновые вывески, витрины как основное освещение"
    },
    { 
      value: 'mixed', 
      label: 'Смешанное', 
      desc: 'Несколько источников разной температуры',
      narrative: "Смешанное освещение — несколько источников разной температуры и жёсткости"
    }
  ]
};

const LIGHT_DIRECTION = {
  id: 'lightDirection',
  label: 'Направление света',
  description: 'Откуда падает основной свет',
  options: [
    { 
      value: 'front', 
      label: 'Фронтальный', 
      desc: 'Свет от камеры, плоский',
      narrative: "Свет фронтальный (от камеры) — плоское освещение, минимальные тени на лице"
    },
    { 
      value: 'side_front', 
      label: 'Боковой-фронтальный (45°)', 
      desc: 'Классический портретный',
      narrative: "Свет боковой-фронтальный (45°) — классическое портретное освещение с мягкими тенями"
    },
    { 
      value: 'side', 
      label: 'Боковой (90°)', 
      desc: 'Драматичный, разделяет лицо',
      narrative: "Свет боковой (90°) — драматичное освещение, половина лица в тени"
    },
    { 
      value: 'back_side', 
      label: 'Задне-боковой', 
      desc: 'Rim light, контур',
      narrative: "Свет задне-боковой — rim light подсвечивает контур, создаёт глубину"
    },
    { 
      value: 'backlight', 
      label: 'Контровой', 
      desc: 'Свет сзади, силуэт',
      narrative: "Контровой свет (сзади субъекта) — свечение вокруг контура, возможен силуэт"
    },
    { 
      value: 'top', 
      label: 'Сверху', 
      desc: 'Полуденное солнце, тени под глазами',
      narrative: "Свет сверху (зенит) — тени под глазами и носом, как полуденное солнце"
    },
    { 
      value: 'bottom', 
      label: 'Снизу', 
      desc: 'Зловещий, неестественный',
      narrative: "Свет снизу — неестественное, зловещее освещение (редко используется)"
    }
  ]
};

const LIGHT_QUALITY = {
  id: 'lightQuality',
  label: 'Качество света',
  description: 'Жёсткость/мягкость светотеневого перехода',
  options: [
    { 
      value: 'hard', 
      label: 'Жёсткий', 
      desc: 'Резкие чёткие тени',
      narrative: "Жёсткий свет — резкие границы теней, высокий контраст, текстуры выражены"
    },
    { 
      value: 'medium', 
      label: 'Средний', 
      desc: 'Умеренные тени, читаемый контраст',
      narrative: "Средний свет — умеренные тени с плавным переходом, но ещё читаемый контраст"
    },
    { 
      value: 'soft', 
      label: 'Мягкий', 
      desc: 'Плавные переходы, обволакивающий',
      narrative: "Мягкий свет — плавные переходы, обволакивающее освещение, минимальный контраст"
    },
    { 
      value: 'diffused', 
      label: 'Рассеянный', 
      desc: 'Почти без теней, плоский',
      narrative: "Рассеянный свет — почти без теней, плоское равномерное освещение"
    }
  ]
};

const TIME_OF_DAY = {
  id: 'timeOfDay',
  label: 'Время суток',
  description: 'Время съёмки, влияет на свет и атмосферу',
  options: [
    { 
      value: 'sunrise', 
      label: 'Рассвет', 
      desc: 'Первые лучи, холодно-тёплый',
      narrative: "Время: рассвет — первые лучи солнца, переход от холодных к тёплым тонам"
    },
    { 
      value: 'morning', 
      label: 'Утро', 
      desc: 'Свежий чистый свет',
      narrative: "Время: утро — свежий чистый свет, невысокое солнце, длинные тени"
    },
    { 
      value: 'midday', 
      label: 'Полдень', 
      desc: 'Жёсткий верхний свет',
      narrative: "Время: полдень — солнце в зените, жёсткие тени под глазами и носом"
    },
    { 
      value: 'afternoon', 
      label: 'День', 
      desc: 'Нейтральный дневной свет',
      narrative: "Время: день — стандартный дневной свет, солнце под углом 45-60°"
    },
    { 
      value: 'golden_hour', 
      label: 'Golden hour', 
      desc: 'За час до заката, тёплый',
      narrative: "Время: golden hour — за 1-2 часа до заката, тёплый золотистый свет"
    },
    { 
      value: 'sunset', 
      label: 'Закат', 
      desc: 'Драматичный, оранжевый',
      narrative: "Время: закат — драматичный оранжево-красный свет, длинные тени"
    },
    { 
      value: 'blue_hour', 
      label: 'Blue hour', 
      desc: 'После заката, синий',
      narrative: "Время: blue hour — сразу после заката, холодный синий свет без прямого солнца"
    },
    { 
      value: 'night', 
      label: 'Ночь', 
      desc: 'Искусственное освещение',
      narrative: "Время: ночь — только искусственные источники, контрастные пятна света"
    }
  ]
};

const WEATHER_LIGHTING = {
  id: 'weatherLighting',
  label: 'Погода/условия',
  description: 'Атмосферные условия освещения',
  options: [
    { 
      value: 'clear', 
      label: 'Ясно', 
      desc: 'Чистое небо, прямой свет',
      narrative: "Погода: ясно — чистое небо, прямой солнечный свет, синее небо в отражениях"
    },
    { 
      value: 'partly_cloudy', 
      label: 'Переменная облачность', 
      desc: 'Свет то жёсткий, то мягкий',
      narrative: "Погода: переменная облачность — свет меняется от жёсткого к мягкому"
    },
    { 
      value: 'overcast', 
      label: 'Пасмурно', 
      desc: 'Рассеянный мягкий свет',
      narrative: "Погода: пасмурно — облака как гигантский софтбокс, мягкий рассеянный свет"
    },
    { 
      value: 'foggy', 
      label: 'Туман/дымка', 
      desc: 'Атмосферный, пониженный контраст',
      narrative: "Погода: туман/дымка — атмосферное освещение, пониженный контраст, глубина теряется"
    },
    { 
      value: 'rainy', 
      label: 'Дождь', 
      desc: 'Мокрые поверхности, отражения',
      narrative: "Погода: дождь — мокрые блестящие поверхности, отражения, приглушённые цвета"
    },
    { 
      value: 'snowy', 
      label: 'Снег', 
      desc: 'Падающий снег, белые поверхности',
      narrative: "Погода: снег — падающие снежинки, белые заснеженные поверхности, холодный рассеянный свет"
    },
    { 
      value: 'stormy', 
      label: 'Гроза/шторм', 
      desc: 'Драматичное небо, резкий контраст',
      narrative: "Погода: гроза/шторм — драматичное небо, резкие контрасты, возможны молнии"
    },
    { 
      value: 'windy', 
      label: 'Ветрено', 
      desc: 'Развевающиеся волосы/ткани',
      narrative: "Погода: ветрено — движение волос и тканей, динамика в кадре"
    },
    { 
      value: 'hazy', 
      label: 'Дымка/смог', 
      desc: 'Пониженная видимость, мягкий свет',
      narrative: "Погода: дымка/смог — пониженная видимость, мягкий рассеянный свет, приглушённые цвета"
    },
    { 
      value: 'indoor', 
      label: 'В помещении', 
      desc: 'Не зависит от погоды',
      narrative: "В помещении — погода не влияет, контролируемые условия"
    }
  ]
};

const SEASON = {
  id: 'season',
  label: 'Сезон',
  description: 'Время года — влияет на свет, цвета, атмосферу',
  options: [
    { 
      value: 'spring', 
      label: 'Весна', 
      desc: 'Свежая зелень, мягкий свет',
      narrative: "Сезон: весна — свежая молодая зелень, цветение, мягкий чистый свет, пастельные тона природы"
    },
    { 
      value: 'summer', 
      label: 'Лето', 
      desc: 'Яркое солнце, насыщенные цвета',
      narrative: "Сезон: лето — яркое высокое солнце, насыщенные цвета, густая зелень, жаркая атмосфера"
    },
    { 
      value: 'autumn', 
      label: 'Осень', 
      desc: 'Золотая листва, тёплые тона',
      narrative: "Сезон: осень — золотая и красная листва, низкое тёплое солнце, меланхоличная атмосфера"
    },
    { 
      value: 'winter', 
      label: 'Зима', 
      desc: 'Холодный свет, минималистичный пейзаж',
      narrative: "Сезон: зима — холодный голубоватый свет, минималистичный пейзаж, снег или голые деревья"
    },
    { 
      value: 'late_autumn', 
      label: 'Поздняя осень', 
      desc: 'Голые деревья, серое небо',
      narrative: "Сезон: поздняя осень — голые деревья, серое небо, опавшая листва, холодная сырость"
    },
    { 
      value: 'early_spring', 
      label: 'Ранняя весна', 
      desc: 'Тающий снег, первые ростки',
      narrative: "Сезон: ранняя весна — тающий снег, первые ростки, холодно-тёплый переходный свет"
    },
    { 
      value: 'any', 
      label: 'Любой / Не важно', 
      desc: 'Сезон не определён',
      narrative: ""
    }
  ]
};

// ═══════════════════════════════════════════════════════════════
// БЛОК 8: ANTI-AI (Realism)
// ═══════════════════════════════════════════════════════════════

const ANTIAI_LEVEL = {
  id: 'antiAiLevel',
  label: 'Уровень реализма',
  description: 'Насколько добавлять "несовершенства"',
  options: [
    { 
      value: 'off', 
      label: 'Выкл (AI стиль)', 
      desc: 'Чистый AI-рендер, без артефактов',
      narrative: ""
    },
    { 
      value: 'low', 
      label: 'Низкий (Чисто)', 
      desc: 'Минимальные несовершенства',
      narrative: "С минимальными признаками реальной съёмки"
    },
    { 
      value: 'medium', 
      label: 'Средний (Естественно)', 
      desc: 'Баланс чистоты и реализма',
      narrative: "С естественными признаками реальной съёмки: микродефекты, текстура, живые детали"
    },
    { 
      value: 'high', 
      label: 'Высокий (Сыро/Raw)', 
      desc: 'Максимум несовершенств',
      narrative: "С максимальными признаками реальной съёмки: ошибки экспозиции, несовершенный фокус, шум, артефакты"
    }
  ]
};

// Флаги Anti-AI (когда уровень > off)
const ANTIAI_FLAGS = {
  allowExposureErrors: { 
    label: 'Ошибки экспозиции', 
    desc: 'Пересветы/недосветы как в реальности',
    narrative: "допускаются ошибки экспозиции"
  },
  allowMixedWhiteBalance: { 
    label: 'Смешанный WB', 
    desc: 'Разные источники света',
    narrative: "допускается смешанный баланс белого"
  },
  requireMicroDefects: { 
    label: 'Микродефекты', 
    desc: 'Пыль, царапины, grain',
    narrative: "обязательны микродефекты (пыль, царапины, зерно)"
  },
  candidComposition: { 
    label: 'Candid композиция', 
    desc: 'Не идеальное кадрирование',
    narrative: "композиция candid, не идеальное кадрирование"
  },
  allowImperfectFocus: { 
    label: 'Несовершенный фокус', 
    desc: 'Лёгкий промах фокуса',
    narrative: "допускается несовершенный фокус"
  },
  allowFlaresReflections: { 
    label: 'Флеры и отражения', 
    desc: 'Оптические артефакты',
    narrative: "допускаются флеры и отражения в линзе"
  },
  preferMicroMotion: { 
    label: 'Микродвижение', 
    desc: 'Лёгкий смаз как в реальности',
    narrative: "предпочтительно микродвижение"
  },
  filmScanTexture: { 
    label: 'Текстура скана', 
    desc: 'Grain, dust, scratches',
    narrative: "с текстурой плёночного скана"
  }
};

// ═══════════════════════════════════════════════════════════════
// ЭКСПОРТ
// ═══════════════════════════════════════════════════════════════

const UNIVERSE_PARAMS = {
  // Блок 1: Подача
  approach: {
    shootingApproach: SHOOTING_APPROACH,
    productDiscipline: PRODUCT_DISCIPLINE
  },
  
  // Блок 2: Техника
  tech: {
    cameraClass: CAMERA_CLASS,
    exposureIntent: EXPOSURE_INTENT,
    shutterIntent: SHUTTER_INTENT,
    processingStyle: PROCESSING_STYLE,
    retouchLevel: RETOUCH_LEVEL
  },
  
  // Блок 3: Эпоха
  era: {
    decade: DECADE,
    culturalContext: CULTURAL_CONTEXT
  },
  
  // Блок 4: Цвет
  color: {
    whiteBalance: WHITE_BALANCE,
    wbShift: WB_SHIFT,
    saturation: SATURATION,
    contrastCurve: CONTRAST_CURVE,
    shadowTone: SHADOW_TONE,
    highlightTone: HIGHLIGHT_TONE
  },
  
  // Блок 5: Оптика
  lens: {
    focalRange: FOCAL_RANGE,
    apertureIntent: APERTURE_INTENT,
    distortionPolicy: DISTORTION_POLICY,
    cameraProximity: CAMERA_PROXIMITY
  },
  
  // Блок 6: Настроение
  mood: {
    visualMood: VISUAL_MOOD,
    energyLevel: ENERGY_LEVEL,
    spontaneity: SPONTANEITY,
    primaryFocus: PRIMARY_FOCUS
  },
  
  // Блок 7: Освещение (НЕ ЗАВИСИТ ОТ ПОЗЫ)
  lighting: {
    lightSource: LIGHT_SOURCE,
    lightDirection: LIGHT_DIRECTION,
    lightQuality: LIGHT_QUALITY,
    timeOfDay: TIME_OF_DAY,
    weatherLighting: WEATHER_LIGHTING,
    season: SEASON
  },
  
  // Блок 8: Anti-AI
  antiAi: {
    antiAiLevel: ANTIAI_LEVEL,
    flags: ANTIAI_FLAGS
  }
};

/**
 * Получить все параметры как плоский массив для UI
 */
function getAllParamsFlat() {
  const result = [];
  
  for (const [blockId, block] of Object.entries(UNIVERSE_PARAMS)) {
    if (blockId === 'antiAi') {
      result.push({ ...block.antiAiLevel, blockId });
      continue;
    }
    
    for (const [paramId, param] of Object.entries(block)) {
      result.push({ ...param, blockId });
    }
  }
  
  return result;
}

/**
 * Получить структуру блоков для UI
 */
function getBlocksStructure() {
  return [
    {
      id: 'approach',
      label: '🎬 Подача',
      description: 'Кто снимает и что главное',
      params: ['shootingApproach', 'productDiscipline']
    },
    {
      id: 'tech',
      label: '📷 Техника',
      description: 'Камера, экспозиция, обработка',
      params: ['cameraClass', 'exposureIntent', 'shutterIntent', 'processingStyle', 'retouchLevel']
    },
    {
      id: 'era',
      label: '🎬 Эпоха',
      description: 'Визуальная эра и культурный контекст',
      params: ['decade', 'culturalContext']
    },
    {
      id: 'color',
      label: '🎨 Цвет',
      description: 'Баланс белого, насыщенность, контраст',
      params: ['whiteBalance', 'wbShift', 'saturation', 'contrastCurve', 'shadowTone', 'highlightTone']
    },
    {
      id: 'lens',
      label: '🔭 Оптика',
      description: 'Фокусное, диафрагма, перспектива',
      params: ['focalRange', 'apertureIntent', 'distortionPolicy', 'cameraProximity']
    },
    {
      id: 'mood',
      label: '💫 Настроение',
      description: 'Эмоция, энергия, спонтанность',
      params: ['visualMood', 'energyLevel', 'spontaneity', 'primaryFocus']
    },
    {
      id: 'lighting',
      label: '💡 Освещение',
      description: 'Свет, время суток, погода, сезон (НЕ зависит от позы!)',
      params: ['lightSource', 'lightDirection', 'lightQuality', 'timeOfDay', 'weatherLighting', 'season']
    },
    {
      id: 'antiAi',
      label: '🤖 Реализм',
      description: 'Anti-AI: несовершенства и текстуры',
      params: ['antiAiLevel']
    }
  ];
}

export {
  UNIVERSE_PARAMS,
  ANTIAI_FLAGS,
  getAllParamsFlat,
  getBlocksStructure
};

