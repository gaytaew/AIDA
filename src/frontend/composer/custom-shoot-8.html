<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Custom Shoot 8 (Pure Logic) ‚Äî AIDA</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="shoot-composer-styles.css">
  <style>
    /* Custom Shoot specific styles */

    /* Reference Locks Panel */
    .locks-panel {
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      padding: 16px;
      margin-bottom: 20px;
    }

    .locks-panel h4 {
      font-size: 12px;
      text-transform: uppercase;
      color: var(--color-text-muted);
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .lock-row {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      background: var(--color-bg);
      border-radius: 8px;
      margin-bottom: 8px;
    }

    .lock-row:last-child {
      margin-bottom: 0;
    }

    .lock-icon {
      font-size: 20px;
      width: 32px;
      text-align: center;
    }

    .lock-info {
      flex: 1;
    }

    .lock-title {
      font-weight: 600;
      font-size: 13px;
      margin-bottom: 2px;
    }

    .lock-desc {
      font-size: 11px;
      color: var(--color-text-muted);
    }

    .lock-preview-thumb {
      width: 48px;
      height: 48px;
      border-radius: 6px;
      overflow: hidden;
      border: 2px solid var(--color-accent);
      display: none;
    }

    .lock-preview-thumb.active {
      display: block;
    }

    .lock-preview-thumb img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .lock-controls {
      display: flex;
      gap: 4px;
    }

    .lock-btn {
      padding: 6px 10px;
      font-size: 11px;
      border-radius: 4px;
      border: 1px solid var(--color-border);
      background: transparent;
      color: var(--color-text-muted);
      cursor: pointer;
      transition: all 0.15s;
    }

    .lock-btn:hover {
      border-color: var(--color-text-muted);
    }

    .lock-btn.active {
      background: var(--color-accent);
      color: white;
      border-color: var(--color-accent);
    }

    .lock-btn.active-soft {
      background: #8B5CF6;
      color: white;
      border-color: #8B5CF6;
    }

    /* Universe Settings Section */
    .universe-settings {
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      padding: 20px;
      margin-bottom: 20px;
    }

    .universe-settings h4 {
      font-size: 12px;
      text-transform: uppercase;
      color: var(--color-text-muted);
      margin-bottom: 16px;
    }

    .universe-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }

    @media (max-width: 800px) {
      .universe-grid {
        grid-template-columns: 1fr;
      }
    }

    .universe-grid .form-group {
      margin: 0;
    }

    .universe-grid label {
      font-size: 12px;
      margin-bottom: 4px;
      display: block;
    }

    .universe-grid select {
      width: 100%;
      padding: 8px 10px;
      font-size: 12px;
      background: var(--color-bg);
      border: 1px solid var(--color-border);
      border-radius: 6px;
      color: var(--color-text);
    }

    /* History item with lock badges */
    .history-lock-badges {
      position: absolute;
      top: 8px;
      right: 8px;
      display: flex;
      gap: 4px;
    }

    .history-lock-badge {
      width: 24px;
      height: 24px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
    }

    .history-lock-badge.style {
      background: #F59E0B;
    }

    /* .history-lock-badge.location removed - Location Lock removed */

    /* Lock selection hint on hover */
    .generated-frame-card .lock-actions {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));
      padding: 40px 10px 10px;
      display: none;
    }

    .generated-frame-card:hover .lock-actions {
      display: block;
    }

    .lock-action-btn {
      display: block;
      width: 100%;
      padding: 6px 10px;
      margin-bottom: 4px;
      background: rgba(255, 255, 255, 0.15);
      border: none;
      border-radius: 4px;
      color: white;
      font-size: 11px;
      cursor: pointer;
      text-align: left;
    }

    .lock-action-btn:hover {
      background: rgba(255, 255, 255, 0.25);
    }

    .lock-action-btn:last-child {
      margin-bottom: 0;
    }

    /* Clothing Items with Descriptions */
    .clothing-items {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .clothing-item {
      display: flex;
      gap: 12px;
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: 8px;
      padding: 12px;
    }

    .clothing-item-preview {
      position: relative;
      width: 80px;
      height: 80px;
      flex-shrink: 0;
    }

    .clothing-item-preview img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 6px;
    }

    .clothing-item-preview .image-thumb-remove {
      position: absolute;
      top: -6px;
      right: -6px;
      width: 20px;
      height: 20px;
      background: var(--color-error);
      color: white;
      border: none;
      border-radius: 50%;
      font-size: 10px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .clothing-description {
      flex: 1;
      background: var(--color-bg);
      border: 1px solid var(--color-border);
      border-radius: 6px;
      padding: 8px;
      font-size: 13px;
      color: var(--color-text);
      resize: vertical;
      font-family: inherit;
    }

    .clothing-description::placeholder {
      color: var(--color-text-muted);
    }

    .clothing-description:focus {
      outline: none;
      border-color: var(--color-primary);
    }

    /* Toast animations */
    @keyframes toast-slide-up {
      from {
        transform: translateX(-50%) translateY(100%);
        opacity: 0;
      }

      to {
        transform: translateX(-50%) translateY(0);
        opacity: 1;
      }
    }

    @keyframes toast-slide-down {
      from {
        transform: translateX(-50%) translateY(0);
        opacity: 1;
      }

      to {
        transform: translateX(-50%) translateY(100%);
        opacity: 0;
      }
    }

    /* Spinner for generation placeholder */
    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    /* SHOOT PRESETS STYLES */
    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

    .presets-shelf {
      margin-bottom: 24px;
      padding: 16px;
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: 12px;
    }

    .presets-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .presets-list {
      display: flex;
      gap: 12px;
      overflow-x: auto;
      padding-bottom: 8px;
      /* Scrollbar space */
    }

    .preset-card {
      min-width: 140px;
      padding: 12px;
      background: var(--color-bg);
      border: 1px solid var(--color-border);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .preset-card:hover {
      border-color: var(--color-accent);
      transform: translateY(-2px);
    }

    .preset-card.active {
      background: var(--color-accent);
      color: white;
      border-color: var(--color-accent);
    }

    .preset-card-title {
      font-weight: 600;
      font-size: 13px;
      margin-bottom: 4px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .preset-card-desc {
      font-size: 11px;
      opacity: 0.8;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .btn-create-preset {
      min-width: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--color-bg);
      border: 1px dashed var(--color-border);
      border-radius: 8px;
      cursor: pointer;
      font-size: 20px;
      color: var(--color-text-muted);
    }

    .btn-create-preset:hover {
      border-color: var(--color-accent);
      color: var(--color-accent);
    }

    /* PRESET GENERATOR MODAL */
    .preset-gen-tabs {
      display: flex;
      border-bottom: 1px solid var(--color-border);
      gap: 16px;
      padding: 0 16px;
      margin-bottom: 16px;
    }

    .preset-gen-tab {
      padding: 12px 0;
      font-size: 13px;
      color: var(--color-text-muted);
      cursor: pointer;
      border-bottom: 2px solid transparent;
    }

    .preset-gen-tab.active {
      color: var(--color-accent);
      border-bottom-color: var(--color-accent);
    }

    .drop-zone {
      border: 2px dashed var(--color-border);
      border-radius: 12px;
      height: 120px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: var(--color-text-muted);
      cursor: pointer;
      margin-bottom: 16px;
      transition: all 0.2s;
    }

    .drop-zone:hover,
    .drop-zone.dragover {
      border-color: var(--color-accent);
      background: rgba(var(--color-accent-rgb), 0.05);
    }

    .drop-preview {
      max-height: 100%;
      max-width: 100%;
      object-fit: contain;
    }
  </style>
</head>

<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <a href="/" class="logo">
          <div class="logo-icon">A</div>
          <div class="logo-text">AIDA</div>
        </a>
      </div>

      <nav class="sidebar-nav" id="sidebar-nav">
        <!-- Auto-populated by sidebar-nav.js -->
      </nav>
      <script src="/shared/sidebar-nav.js"></script>

      <div class="sidebar-footer">
        <div class="status-badge">
          <span class="status-dot"></span>
          <span id="server-status">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main">
      <header class="page-header">
        <h1 class="page-title">üöÄ Custom Shoot v8.0 (Pure Logic)</h1>
        <p class="page-subtitle">
          –ü—Ä–æ—Å—Ç–æ –æ–ø–∏—à–∏ –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å —Å—ä—ë–º–∫–∏ —Å–≤–æ–∏–º–∏ —Å–ª–æ–≤–∞–º–∏. –ë–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ ‚Äî –æ–¥–Ω–∏–º –ø—Ä–æ–º–ø—Ç–æ–º.
        </p>
      </header>

      <div class="page-content">
        <div class="composer-layout">
          <!-- Steps Sidebar -->
          <div class="steps-sidebar">
            <ul class="steps-list">
              <li class="step-item active" data-step="shoot">
                <div class="step-number">1</div>
                <div class="step-content">
                  <div class="step-title">–°—ä—ë–º–∫–∞</div>
                  <div class="step-desc">–°–æ–∑–¥–∞—Ç—å –∏–ª–∏ –≤—ã–±—Ä–∞—Ç—å</div>
                  <div class="step-status pending" id="step-shoot-status">–ù–µ –≤—ã–±—Ä–∞–Ω–æ</div>
                </div>
              </li>
              <li class="step-item locked" data-step="models">
                <div class="step-number">2</div>
                <div class="step-content">
                  <div class="step-title">–ú–æ–¥–µ–ª–∏</div>
                  <div class="step-desc">–î–æ 3 –º–æ–¥–µ–ª–µ–π</div>
                  <div class="step-status pending" id="step-models-status">0 / 3</div>
                </div>
              </li>
              <li class="step-item locked" data-step="clothing">
                <div class="step-number">3</div>
                <div class="step-content">
                  <div class="step-title">–û–¥–µ–∂–¥–∞</div>
                  <div class="step-desc">–†–µ—Ñ–µ—Ä–µ–Ω—Å—ã –ª—É–∫–æ–≤</div>
                  <div class="step-status pending" id="step-clothing-status">–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ</div>
                </div>
              </li>
              <li class="step-item locked" data-step="generate">
                <div class="step-number">4</div>
                <div class="step-content">
                  <div class="step-title">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è</div>
                  <div class="step-desc">–ö–∞–¥—Ä—ã + –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</div>
                  <div class="step-status pending" id="step-generate-status">‚Äî</div>
                </div>
              </li>
            </ul>
          </div>

          <!-- Composer Main Area -->
          <div class="composer-main">

            <!-- Step 1: Select/Create Shoot -->
            <div class="step-panel active" data-panel="shoot">
              <div class="step-panel-header">
                <h2 class="step-panel-title">–í—ã–±–µ—Ä–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–π Custom Shoot</h2>
                <p class="step-panel-desc">
                  –í Custom Shoot –≤—Å–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é –Ω–∞ —ç—Ç–∞–ø–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.
                </p>
              </div>

              <div class="form-actions" style="margin-bottom: 24px;">
                <button class="btn btn-primary" id="btn-new-shoot">
                  ‚ú® –ù–æ–≤—ã–π Custom Shoot
                </button>
              </div>

              <h3 class="section-title" style="margin-bottom: 16px;">–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ Custom Shoots</h3>
              <div id="shoots-list" class="shoots-list">
                <div class="empty-state">
                  <div class="empty-state-icon">‚ú®</div>
                  <div class="empty-state-title">–ù–µ—Ç —Å—ä—ë–º–æ–∫</div>
                  <div class="empty-state-text">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π Custom Shoot</div>
                </div>
              </div>

              <div class="composer-nav">
                <div></div>
                <button class="btn btn-primary" id="btn-next-to-models" disabled>
                  –î–∞–ª–µ–µ: –ú–æ–¥–µ–ª–∏ ‚Üí
                </button>
              </div>
            </div>

            <!-- Step 2: Select Models -->
            <div class="step-panel" data-panel="models">
              <div class="step-panel-header">
                <h2 class="step-panel-title">–î–æ–±–∞–≤—å –º–æ–¥–µ–ª–µ–π</h2>
                <p class="step-panel-desc">
                  –í—ã–±–µ—Ä–∏ –æ—Ç 1 –¥–æ 3 –º–æ–¥–µ–ª–µ–π –¥–ª—è —Å—ä—ë–º–∫–∏. –ö–∞–∂–¥–∞—è –º–æ–¥–µ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–≤–æ—é –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å –≤–æ –≤—Å–µ—Ö –∫–∞–¥—Ä–∞—Ö.
                </p>
              </div>

              <div id="model-slots" class="model-slots">
                <div class="model-slot" data-slot="0" style="position: relative;">
                  <div class="model-slot-icon">üë§</div>
                  <div class="model-slot-label">–ú–æ–¥–µ–ª—å 1</div>
                </div>
                <div class="model-slot" data-slot="1" style="position: relative;">
                  <div class="model-slot-icon">üë§</div>
                  <div class="model-slot-label">–ú–æ–¥–µ–ª—å 2 (–æ–ø—Ü.)</div>
                </div>
                <div class="model-slot" data-slot="2" style="position: relative;">
                  <div class="model-slot-icon">üë§</div>
                  <div class="model-slot-label">–ú–æ–¥–µ–ª—å 3 (–æ–ø—Ü.)</div>
                </div>
              </div>

              <div id="available-models" style="display: none;">
                <h3 class="section-title" style="margin: 24px 0 16px;">–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏</h3>
                <div id="models-grid" class="selection-grid"></div>
              </div>

              <div class="composer-nav">
                <button class="btn btn-secondary" id="btn-back-to-shoot">
                  ‚Üê –ù–∞–∑–∞–¥
                </button>
                <button class="btn btn-primary" id="btn-next-to-clothing" disabled>
                  –î–∞–ª–µ–µ: –û–¥–µ–∂–¥–∞ ‚Üí
                </button>
              </div>
            </div>

            <!-- Step 3: Clothing -->
            <div class="step-panel" data-panel="clothing">
              <div class="step-panel-header">
                <h2 class="step-panel-title">–ó–∞–≥—Ä—É–∑–∏ –æ–¥–µ–∂–¥—É</h2>
                <p class="step-panel-desc">
                  –ó–∞–≥—Ä—É–∑–∏ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—ã –æ–¥–µ–∂–¥—ã –¥–ª—è –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏.
                </p>
              </div>

              <div id="clothing-sections" class="clothing-sections">
                <!-- Will be populated dynamically -->
              </div>

              <div class="composer-nav">
                <button class="btn btn-secondary" id="btn-back-to-models">
                  ‚Üê –ù–∞–∑–∞–¥
                </button>
                <button class="btn btn-primary" id="btn-next-to-frames">
                  –î–∞–ª–µ–µ: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ‚Üí
                </button>
              </div>
            </div>

            <!-- Step 4: Generation (Pure Prompt Mode) -->
            <div class="step-panel" data-panel="generate">
              <div class="step-panel-header">
                <h2 class="step-panel-title">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ –ø—Ä–æ–º–ø—Ç—É</h2>
                <p class="step-panel-desc">
                  –û–ø–∏—à–∏ –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å —Å—ä—ë–º–∫–∏ —Å–≤–æ–∏–º–∏ —Å–ª–æ–≤–∞–º–∏.
                </p>
              </div>


              <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
              <!-- SHOOT PRESETS (NEW) -->
              <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
              <div class="presets-shelf">
                <div class="presets-header">
                  <h4 style="margin:0; font-size:12px; text-transform:uppercase; color:var(--color-text-muted);">
                    üì∏ Shoot Presets
                  </h4>
                  <button id="btn-open-preset-gen"
                    style="background:none; border:none; color:var(--color-accent); font-size:12px; cursor:pointer;">
                    + –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π
                  </button>
                </div>

                <div class="presets-list" id="presets-list">
                  <!-- JS will render presets here -->
                  <div class="btn-create-preset" id="btn-create-preset-shortcut">+</div>
                </div>
              </div>

              <!-- Reference Locks -->
              <div class="locks-panel">
                <h4>üîí Style Lock (–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å)</h4>

                <div class="lock-row" id="style-lock-row">
                  <div class="lock-icon">üé®</div>
                  <div class="lock-info">
                    <div class="lock-title">Style Lock</div>
                    <div class="lock-desc">–§–∏–∫—Å–∏—Ä—É–µ—Ç —Ü–≤–µ—Ç, —Å–≤–µ—Ç, —Ç–µ–∫—Å—Ç—É—Ä—É</div>
                  </div>
                  <div class="lock-preview-thumb" id="style-lock-preview">
                    <img src="" alt="Style ref" id="style-lock-img">
                  </div>
                  <div class="lock-controls">
                    <button class="lock-btn active" id="style-lock-off" data-mode="off">Off</button>
                    <button class="lock-btn" id="style-lock-strict" data-mode="strict">Strict</button>
                    <button class="lock-btn" id="style-lock-soft" data-mode="soft">Soft</button>
                  </div>
                </div>

                <div
                  style="font-size: 11px; color: var(--color-text-muted); margin-top: 8px; padding: 8px; background: var(--color-bg); border-radius: 6px;">
                  üí° –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –ø–µ—Ä–≤—ã–π –∫–∞–¥—Ä, –∑–∞—Ç–µ–º –∫–ª–∏–∫–Ω–∏ –Ω–∞ –Ω–µ–≥–æ –≤ –∏—Å—Ç–æ—Ä–∏–∏, —á—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–∞–∫ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å –¥–ª—è Style
                  Lock.
                </div>
              </div>

              <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
              <!-- VISUAL PROMPT (–≥–ª–∞–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç V7) -->
              <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

              <div class="universe-settings" style="border: 2px solid var(--color-primary);">
                <h4 style="display: flex; align-items: center; gap: 8px; margin-bottom: 16px;">
                  ‚úèÔ∏è –í–∏–∑—É–∞–ª—å–Ω—ã–π –ø—Ä–æ–º–ø—Ç
                  <span style="font-weight: normal; font-size: 10px; color: var(--color-text-muted);">
                    –û–ø–∏—à–∏ –≤—Å—ë, —á—Ç–æ —Ö–æ—á–µ—à—å —É–≤–∏–¥–µ—Ç—å –Ω–∞ —Ñ–æ—Ç–æ
                  </span>
                </h4>
                <textarea id="visual-prompt" placeholder="–û–ø–∏—à–∏ –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å —Å—ä—ë–º–∫–∏...

–ù–∞–ø—Ä–∏–º–µ—Ä:
‚Ä¢ –ó–∞–∫–∞—Ç–Ω—ã–π —Å–≤–µ—Ç –Ω–∞ –ø–ª—è–∂–µ, –º—è–≥–∫–∏–µ –∑–æ–ª–æ—Ç—ã–µ —Ç–æ–Ω–∞, –º–æ–¥–µ–ª—å –≤ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–Ω–æ–π –ø–æ–∑–µ —Å–º–æ—Ç—Ä–∏—Ç –≤ –∫–∞–º–µ—Ä—É
‚Ä¢ –°—Ç—É–¥–∏–π–Ω–æ–µ —Ñ–æ—Ç–æ –Ω–∞ –±–µ–ª–æ–º —Ñ–æ–Ω–µ, —è—Ä–∫–∏–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–π —Å–≤–µ—Ç, —É–≤–µ—Ä–µ–Ω–Ω—ã–π –≤–∑–≥–ª—è–¥
‚Ä¢ –£–ª–∏—á–Ω–∞—è —Å—ä—ë–º–∫–∞ –≤ –¥–æ–∂–¥–ª–∏–≤–æ–º –≥–æ—Ä–æ–¥–µ, –Ω–µ–æ–Ω–æ–≤—ã–µ –æ—Ç—Ä–∞–∂–µ–Ω–∏—è, –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–Ω–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞"
                  style="width: 100%; min-height: 180px; padding: 16px; background: var(--color-bg); border: 1px solid var(--color-border); border-radius: 8px; color: var(--color-text); font-size: 14px; line-height: 1.6; resize: vertical; font-family: inherit;"></textarea>
                <div
                  style="margin-top: 12px; padding: 10px; background: var(--color-bg); border-radius: 6px; font-size: 11px; color: var(--color-text-muted);">
                  üí° <strong>–°–æ–≤–µ—Ç:</strong> –ß–µ–º –ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ ‚Äî —Ç–µ–º —Ç–æ—á–Ω–µ–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –£–∫–∞–∂–∏ –æ—Å–≤–µ—â–µ–Ω–∏–µ, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ,
                  —Ü–≤–µ—Ç–æ–≤—É—é –≥–∞–º–º—É, –ø–æ–∑—É, –æ–∫—Ä—É–∂–µ–Ω–∏–µ.
                </div>
              </div>

              <!-- –ë–∞–∑–æ–≤—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª—ã -->
              <div class="generation-controls"
                style="background: var(--color-surface); border: 1px solid var(--color-border); border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                <h4
                  style="margin-bottom: 16px; font-size: 12px; text-transform: uppercase; color: var(--color-text-muted);">
                  –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h4>

                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;">
                  <!-- Location -->
                  <div class="form-group" style="margin: 0;">
                    <label for="gen-location">üìç –õ–æ–∫–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                    <select id="gen-location"
                      style="width: 100%; padding: 8px; background: var(--color-bg); border: 1px solid var(--color-border); border-radius: 6px; color: var(--color-text); font-size: 12px;">
                      <option value="">–ò–∑ –ø—Ä–æ–º–ø—Ç–∞</option>
                    </select>
                  </div>

                  <!-- Aspect Ratio -->
                  <div class="form-group" style="margin: 0;">
                    <label for="gen-aspect-ratio">üìê –û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è</label>
                    <select id="gen-aspect-ratio"
                      style="width: 100%; padding: 8px; background: var(--color-bg); border: 1px solid var(--color-border); border-radius: 6px; color: var(--color-text); font-size: 12px;">
                      <option value="3:4" selected>3:4 (–ü–æ—Ä—Ç—Ä–µ—Ç)</option>
                      <option value="4:3">4:3 (–ü–µ–π–∑–∞–∂)</option>
                      <option value="1:1">1:1 (–ö–≤–∞–¥—Ä–∞—Ç)</option>
                      <option value="9:16">9:16 (–°—Ç–æ—Ä–∏—Å)</option>
                      <option value="16:9">16:9 (–ö–∏–Ω–æ)</option>
                    </select>
                  </div>

                  <!-- Image Size -->
                  <div class="form-group" style="margin: 0;">
                    <label for="gen-image-size">üìè –ö–∞—á–µ—Å—Ç–≤–æ</label>
                    <select id="gen-image-size"
                      style="width: 100%; padding: 8px; background: var(--color-bg); border: 1px solid var(--color-border); border-radius: 6px; color: var(--color-text); font-size: 12px;">
                      <option value="2K" selected>2K (–°—Ç–∞–Ω–¥–∞—Ä—Ç)</option>
                      <option value="4K">4K (–í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ)</option>
                    </select>
                  </div>
                </div>

                <!-- Pose sketch adherence -->
                <div style="margin-top: 16px; display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                  <div class="form-group" style="margin: 0;">
                    <label for="gen-pose-adherence">üéØ –°–ª–µ–¥–æ–≤–∞–Ω–∏–µ —ç—Å–∫–∏–∑—É –ø–æ–∑—ã</label>
                    <select id="gen-pose-adherence"
                      style="width: 100%; padding: 8px; background: var(--color-bg); border: 1px solid var(--color-border); border-radius: 6px; color: var(--color-text); font-size: 12px;">
                      <option value="1">1 ‚Äî –¢–≤–æ—Ä—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è</option>
                      <option value="2" selected>2 ‚Äî –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –≤–∞—Ä–∏–∞—Ü–∏—è</option>
                      <option value="3">3 ‚Äî –°—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ</option>
                      <option value="4">4 ‚Äî –¢–æ—á–Ω–∞—è –∫–æ–ø–∏—è</option>
                    </select>
                  </div>
                  <!-- Hidden elements for compatibility -->
                  <div style="display: none;">
                    <select id="gen-shot-size">
                      <option value="default">–ê–≤—Ç–æ</option>
                    </select>
                    <select id="gen-camera-angle">
                      <option value="eye_level">–ù–∞ —É—Ä–æ–≤–Ω–µ –≥–ª–∞–∑</option>
                    </select>
                    <textarea id="gen-extra-prompt"></textarea>
                  </div>
                </div>
              </div>

              <!-- Universe params container (hidden, for compatibility) -->
              <div id="universe-params-container" style="display: none;"></div>
              <div id="visual-anchors-panel" style="display: none;"></div>
              <div id="narrative-preview-panel" style="display: none;"></div>

              <!-- Frames to generate -->
              <div id="frames-to-generate" style="margin-bottom: 20px;">
                <!-- Will be populated by JS -->
              </div>

              <!-- Generated Images History -->
              <div id="generated-images">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                  <h3 class="section-title" style="margin: 0;">–ò—Å—Ç–æ—Ä–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–π</h3>
                  <span id="generation-count" style="font-size: 13px; color: var(--color-text-muted);">0
                    –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</span>
                </div>
                <div id="images-gallery" class="selection-grid"
                  style="grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));">
                  <div class="empty-state" style="grid-column: 1 / -1; padding: 40px;">
                    <div class="empty-state-icon">üé®</div>
                    <div class="empty-state-title">–ù–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–∞–¥—Ä–æ–≤</div>
                    <div class="empty-state-text">–ù–∞–∂–º–∏ "–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å" –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –∫–∞–¥—Ä–∞ –≤—ã—à–µ</div>
                  </div>
                </div>
              </div>

              <div class="composer-nav">
                <button class="btn btn-secondary" id="btn-back-to-frames">
                  ‚Üê –ù–∞–∑–∞–¥ –∫ –æ–¥–µ–∂–¥–µ
                </button>
                <button class="btn btn-secondary" id="btn-clear-history" style="color: var(--color-accent);">
                  üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
                </button>
              </div>
            </div>

          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Lightbox for generated images -->
  <div class="lightbox-overlay" id="lightbox">
    <button class="lightbox-close" id="lightbox-close">‚úï</button>
    <button class="lightbox-nav prev" id="lightbox-prev">‚Äπ</button>
    <button class="lightbox-nav next" id="lightbox-next">‚Ä∫</button>
    <div class="lightbox-container">
      <img class="lightbox-image zoomed-1x" id="lightbox-image" src="" alt="Preview">
    </div>
    <div class="lightbox-zoom-hint" id="lightbox-zoom-hint">–ö–ª–∏–∫ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è (1x)</div>
    <div class="lightbox-info" id="lightbox-info">1 / 1</div>
  </div>

  <!-- Looks Selection Modal -->
  <div id="looks-modal" class="modal-overlay"
    style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 2000; align-items: center; justify-content: center;">
    <div class="modal-card"
      style="background: var(--color-surface); width: 800px; max-width: 90vw; height: 80vh; display: flex; flex-direction: column; border-radius: 12px; overflow: hidden;">
      <div class="modal-header"
        style="padding: 16px; border-bottom: 1px solid var(--color-border); display: flex; justify-content: space-between; align-items: center;">
        <h3 style="margin: 0;">–í—ã–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑ (Look)</h3>
        <button id="btn-close-looks-modal"
          style="background: none; border: none; font-size: 24px; cursor: pointer; color: var(--color-text);">√ó</button>
      </div>
      <div class="modal-body" style="flex: 1; overflow-y: auto; padding: 16px;">
        <div id="looks-grid"
          style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 16px;">
          <!-- Looks rendered here -->
        </div>
      </div>
    </div>
  </div>

  <!-- SHOOT PRESET GENERATOR MODAL -->
  <div id="preset-gen-modal" class="modal-overlay"
    style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 2100; align-items: center; justify-content: center;">
    <div class="modal-card"
      style="background: var(--color-surface); width: 600px; max-width: 90vw; border-radius: 12px; overflow: hidden; display: flex; flex-direction: column;">

      <div class="modal-header"
        style="padding: 16px; border-bottom: 1px solid var(--color-border); display: flex; justify-content: space-between; align-items: center;">
        <h3 style="margin: 0;">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–µ—Å–µ—Ç</h3>
        <button id="btn-close-preset-modal"
          style="background: none; border: none; font-size: 24px; cursor: pointer; color: var(--color-text);">√ó</button>
      </div>

      <div class="preset-gen-tabs">
        <div class="preset-gen-tab active" data-tab="text" id="tab-preset-text">–ü–æ –æ–ø–∏—Å–∞–Ω–∏—é</div>
        <div class="preset-gen-tab" data-tab="image" id="tab-preset-image">–ü–æ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—É</div>
      </div>

      <div class="modal-body" style="padding: 20px;">

        <!-- Tab: Text -->
        <div id="panel-preset-text">
          <textarea id="preset-text-prompt" placeholder="–û–ø–∏—à–∏ —Å—Ç–∏–ª—å: '–ì—Ä–∞–Ω–∂ 90-—Ö, –≤—Å–ø—ã—à–∫–∞ –≤ –ª–æ–±, –≥—Ä—è–∑–Ω–∞—è —É–ª–∏—Ü–∞...'"
            style="width: 100%; height: 120px; padding: 12px; background: var(--color-bg); border: 1px solid var(--color-border); border-radius: 8px; color: var(--color-text); resize: none; margin-bottom: 16px;"></textarea>

          <button class="btn btn-primary" id="btn-gen-preset-text" style="width: 100%;">
            ‚ú® –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ—Å–µ—Ç
          </button>
        </div>

        <!-- Tab: Image -->
        <div id="panel-preset-image" style="display: none;">
          <div class="drop-zone" id="preset-drop-zone">
            <span id="preset-drop-label">–ü–µ—Ä–µ—Ç–∞—â–∏ —Ñ–æ—Ç–æ —Å—é–¥–∞ –∏–ª–∏ –∫–ª–∏–∫–Ω–∏</span>
            <input type="file" id="preset-file-input" style="display: none;" accept="image/*">
            <img id="preset-preview-img" class="drop-preview" style="display: none;">
          </div>

          <button class="btn btn-primary" id="btn-gen-preset-image" style="width: 100%;" disabled>
            üëÅÔ∏è –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∏–ª—å
          </button>
        </div>

        <!-- Generation Result (Preview) -->
        <div id="preset-gen-result"
          style="display: none; margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--color-border);">
          <div
            style="background: var(--color-bg); padding: 12px; border-radius: 8px; font-size: 12px; font-family: monospace; white-space: pre-wrap; max-height: 200px; overflow-y: auto; color: var(--color-text-muted);"
            id="preset-json-preview"></div>

          <div style="margin-top: 16px; display: flex; gap: 12px;">
            <button class="btn btn-secondary" id="btn-preset-discard">–û—Ç–º–µ–Ω–∞</button>
            <button class="btn btn-primary" id="btn-preset-save">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–µ—Å–µ—Ç</button>
          </div>
        </div>

        <!-- Loading State -->
        <div id="preset-loading" style="display: none; text-align: center; padding: 20px;">
          <div
            style="animation: spin 1s linear infinite; width: 24px; height: 24px; border: 2px solid var(--color-accent); border-top-color: transparent; border-radius: 50%; margin: 0 auto 12px;">
          </div>
          <div style="font-size: 12px; color: var(--color-text-muted);">AI –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—Ç–∏–ª—å...</div>
        </div>

      </div>
    </div>
  </div>

  <script src="custom-shoot-8.js?v=5"></script>
  <script type="module" src="../shared/dev-console.js"></script>
</body>

</html>