<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Model Editor ‚Äî AIDA</title>
  <link rel="stylesheet" href="../styles.css">
  <style>
    /* Model Editor specific styles */

    .form-actions .btn {
      flex: 1;
    }

    /* Model List */
    .model-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .model-card {
      background: var(--color-bg);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      padding: 16px;
      display: flex;
      gap: 16px;
      cursor: pointer;
      transition: all 0.15s;
    }

    .model-card:hover {
      border-color: var(--color-border-hover);
    }

    .model-card.selected {
      border-color: var(--color-accent);
      box-shadow: 0 0 0 1px var(--color-accent);
    }

    .model-card-avatar {
      width: 64px;
      height: 64px;
      border-radius: var(--radius-md);
      background: var(--color-surface-elevated);
      overflow: hidden;
      flex-shrink: 0;
    }

    .model-card-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .model-card-avatar-placeholder {
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: var(--color-text-muted);
    }

    .model-card-info {
      flex: 1;
      min-width: 0;
    }

    .model-card-name {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 4px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .model-card-label {
      font-size: 13px;
      color: var(--color-text-muted);
      margin-bottom: 8px;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .model-card-meta {
      font-size: 12px;
      color: var(--color-text-muted);
      opacity: 0.7;
    }

    .model-card-actions {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .icon-btn {
      width: 32px;
      height: 32px;
      border-radius: var(--radius-sm);
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      color: var(--color-text-muted);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      transition: all 0.15s;
    }

    .icon-btn:hover {
      color: var(--color-text);
      border-color: var(--color-border-hover);
    }

    .icon-btn.danger:hover {
      color: #EF4444;
      border-color: #EF4444;
    }

    /* Prompt Preview */
    .prompt-preview {
      background: var(--color-bg);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      padding: 16px;
      margin-top: 20px;
    }

    .prompt-preview-title {
      font-size: 12px;
      font-weight: 600;
      color: var(--color-text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 12px;
    }

    .prompt-preview-text {
      font-size: 13px;
      line-height: 1.6;
      color: var(--color-text);
      font-family: var(--font-mono);
      white-space: pre-wrap;
    }
  </style>
</head>

<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <a href="/" class="logo">
          <div class="logo-icon">A</div>
          <div class="logo-text">AIDA</div>
        </a>
      </div>

      <nav class="sidebar-nav" id="sidebar-nav">
        <!-- Auto-populated by sidebar-nav.js -->
      </nav>
      <script src="/shared/sidebar-nav.js"></script>

      <div class="sidebar-footer">
        <div class="status-badge">
          <span class="status-dot"></span>
          <span id="server-status">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main">
      <header class="page-header">
        <h1 class="page-title">–†–µ–¥–∞–∫—Ç–æ—Ä –º–æ–¥–µ–ª–µ–π</h1>
        <p class="page-subtitle">
          –ó–∞–≥—Ä—É–∑–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –º–æ–¥–µ–ª–∏ –∏ AI —Å–æ–∑–¥–∞—Å—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.
        </p>
      </header>

      <div class="page-content">
        <div class="editor-layout">
          <!-- Left Panel: Input -->
          <div class="panel">
            <div class="panel-title">
              <span class="panel-title-icon">üì∏</span>
              <span>–°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏</span>
            </div>

            <!-- Upload Zone -->
            <label id="upload-zone" class="upload-zone">
              <input type="file" id="file-input" multiple accept="image/*" style="display: none;">
              <div class="upload-zone-icon">üë§</div>
              <div class="upload-zone-text">–ü–µ—Ä–µ—Ç–∞—â–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –º–æ–¥–µ–ª–∏ —Å—é–¥–∞</div>
              <div class="upload-zone-hint">–∏–ª–∏ –∫–ª–∏–∫–Ω–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–æ–≤ (–¥–æ 10 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)</div>
            </label>

            <!-- Image Previews -->
            <div id="images-preview" class="images-preview"></div>

            <!-- Hint Input -->
            <div class="form-group full" style="margin-bottom: 20px;">
              <label class="form-label">–ü–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è AI (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
              <input type="text" id="model-hint" class="form-input"
                placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –º–æ–¥–µ–ª—å –≤ –¥—É—Ö–µ 90-—Ö, –∞–Ω–¥—Ä–æ–≥–∏–Ω–Ω–∞—è –≤–Ω–µ—à–Ω–æ—Å—Ç—å">
            </div>

            <!-- Generate Button -->
            <button id="btn-generate" class="btn btn-primary" style="width: 100%;" disabled>
              ‚ú® –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ —Å AI
            </button>

            <div id="status-generate" class="status-message"></div>

            <!-- Form (appears after generation) -->
            <div id="model-form"
              style="display: none; margin-top: 24px; padding-top: 24px; border-top: 1px solid var(--color-border);">
              <div class="form-grid">
                <div class="form-group full">
                  <label class="form-label">–ò–º—è –º–æ–¥–µ–ª–∏</label>
                  <input type="text" id="model-name" class="form-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Elegant Brunette">
                </div>

                <div class="form-group full">
                  <label class="form-label">–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ</label>
                  <input type="text" id="model-label" class="form-input" placeholder="–û–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –¥–ª—è UI">
                </div>

                <div class="form-group">
                  <label class="form-label">–†–æ—Å—Ç (—Å–º)</label>
                  <input type="number" id="model-height" class="form-input" placeholder="175" min="100" max="250">
                </div>

                <div class="form-group">
                  <label class="form-label">–¢–∏–ø —Ç–µ–ª–æ—Å–ª–æ–∂–µ–Ω–∏—è</label>
                  <select id="model-body-type" class="form-select">
                    <option value="">‚Äî –í—ã–±–µ—Ä–∏—Ç–µ ‚Äî</option>
                    <option value="slim">Slim</option>
                    <option value="athletic">Athletic</option>
                    <option value="curvy">Curvy</option>
                    <option value="petite">Petite</option>
                    <option value="tall">Tall</option>
                    <option value="average">Average</option>
                    <option value="plus-size">Plus-size</option>
                  </select>
                </div>

                <div class="form-group full">
                  <label class="form-label">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (Background/Experience)</label>
                  <input type="text" id="model-background" class="form-input"
                    placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: fashion editorial, extreme sports, commercial lifestyle...">
                </div>

                <div class="form-group full">
                  <label class="form-label">–î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–æ—Å—Ç–∏ (promptSnippet)</label>
                  <textarea id="model-prompt" class="form-textarea large"
                    placeholder="–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫..."></textarea>
                </div>

                <!-- Expressions and Poses removed as per user request -->
              </div>

              <!-- Step 2: Avatar Generation -->
              <div id="avatar-section"
                style="margin-top: 24px; padding-top: 24px; border-top: 1px solid var(--color-border);">
                <div class="panel-title" style="margin-bottom: 16px;">
                  <span class="panel-title-icon">üé≠</span>
                  <span>–®–∞–≥ 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞–∫—É—Ä—Å–æ–≤</span>
                </div>

                <p style="font-size: 13px; color: var(--color-text-muted); margin-bottom: 16px;">
                  –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ 4 –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞–∫—É—Ä—Å–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Identity Collage. –ú–æ–∂–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ –æ–¥–Ω–æ–º—É –∏–ª–∏
                  –≤—Å–µ —Å—Ä–∞–∑—É.
                </p>

                <div class="avatar-grid" id="avatar-grid"
                  style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 16px;">
                  <!-- Populated by JS -->
                </div>

                <div style="display: flex; gap: 8px;">
                  <button id="btn-generate-avatars-all" class="btn btn-secondary" style="flex: 2;">
                    ‚ú® –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ä–∞–∫—É—Ä—Å—ã
                  </button>
                  <button id="btn-refresh-collage" class="btn btn-secondary" style="flex: 1; display: none;">
                    üîÑ –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–ª–ª–∞–∂
                  </button>
                </div>

                <div id="status-avatars" class="status-message"></div>

                <!-- Collage Preview -->
                <div id="collage-preview"
                  style="display: none; margin-top: 24px; padding-top: 16px; border-top: 1px solid var(--color-border);">
                  <div class="form-label"
                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                    <span>Identity Collage (–†–µ–∑—É–ª—å—Ç–∞—Ç)</span>
                  </div>
                  <div
                    style="border: 1px solid var(--color-border); border-radius: var(--radius-md); overflow: hidden;">
                    <img id="collage-image" src="" alt="Identity Collage" style="width: 100%; display: block;">
                  </div>
                </div>
              </div>

              <div class="form-actions">
                <button id="btn-save" class="btn btn-primary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –º–æ–¥–µ–ª—å</button>
                <button id="btn-clear" class="btn btn-secondary">–û—á–∏—Å—Ç–∏—Ç—å</button>
              </div>

              <div id="status-save" class="status-message"></div>
            </div>
          </div>

          <!-- Right Panel: Model List -->
          <div class="panel">
            <div class="panel-title">
              <span class="panel-title-icon">üë•</span>
              <span>–ö–∞—Ç–∞–ª–æ–≥ –º–æ–¥–µ–ª–µ–π</span>
            </div>

            <div id="model-list" class="model-list">
              <div class="empty-state">
                <div class="empty-state-icon">üë§</div>
                <div class="empty-state-title">–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π</div>
                <div class="empty-state-text">–ó–∞–≥—Ä—É–∑–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏ —Å–æ–∑–¥–∞–π –ø–µ—Ä–≤—É—é –º–æ–¥–µ–ª—å.</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script type="module" src="model-editor.js"></script>
  <script type="module" src="../shared/dev-console.js"></script>
</body>

</html>