<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Look Editor ‚Äî AIDA</title>
    <link rel="stylesheet" href="../styles.css">
    <style>
        /* Look Editor specific styles */
        .items-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 12px;
        }

        .look-item {
            background: var(--color-surface-elevated);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            padding: 12px;
            display: flex;
            gap: 12px;
            align-items: flex-start;
        }

        .look-item-image {
            width: 64px;
            height: 64px;
            background: var(--color-bg);
            border-radius: var(--radius-sm);
            object-fit: cover;
            flex-shrink: 0;
        }

        .look-item-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .look-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .look-item-type {
            font-size: 11px;
            text-transform: uppercase;
            color: var(--color-text-muted);
            font-weight: 600;
        }

        .look-item-desc {
            font-size: 13px;
            color: var(--color-text);
        }

        .btn-remove-item {
            color: var(--color-text-muted);
            cursor: pointer;
            font-size: 16px;
            padding: 4px;
        }

        .btn-remove-item:hover {
            color: #EF4444;
        }

        .add-item-zone {
            border: 1px dashed var(--color-border);
            border-radius: var(--radius-md);
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--color-text-muted);
            font-size: 13px;
        }

        .add-item-zone:hover {
            border-color: var(--color-accent);
            background: rgba(99, 102, 241, 0.05);
            color: var(--color-accent);
        }

        /* Modal for adding item */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-card {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            width: 400px;
            padding: 24px;
            box-shadow: var(--shadow-xl);
        }

        /* Look Gallery Grid */
        .look-card {
            background: var(--color-bg);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            overflow: hidden;
            cursor: pointer;
            transition: all 0.15s;
        }

        .look-card:hover {
            border-color: var(--color-accent);
            transform: translateY(-2px);
        }

        .look-card.selected {
            border-color: var(--color-accent);
            box-shadow: 0 0 0 2px var(--color-accent);
        }

        .look-card-preview {
            aspect-ratio: 3/4;
            background: var(--color-surface-elevated);
            position: relative;
        }

        .look-card-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .look-card-info {
            padding: 12px;
        }

        .look-card-title {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 4px;
        }

        .look-card-meta {
            font-size: 12px;
            color: var(--color-text-muted);
        }
    </style>
</head>

<body>
    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <a href="/" class="logo">
                    <div class="logo-icon">A</div>
                    <div class="logo-text">AIDA</div>
                </a>
            </div>

            <nav class="sidebar-nav" id="sidebar-nav">
                <!-- Auto-populated -->
            </nav>
            <script src="/shared/sidebar-nav.js"></script>

            <div class="sidebar-footer">
                <div class="status-badge">
                    <span class="status-dot"></span>
                    <span id="status-text">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main">
            <header class="page-header">
                <h1 class="page-title">–†–µ–¥–∞–∫—Ç–æ—Ä –û–±—Ä–∞–∑–æ–≤ (Looks)</h1>
                <p class="page-subtitle">
                    –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∏ —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –≥–æ—Ç–æ–≤—ã–µ –æ–±—Ä–∞–∑—ã (–æ–¥–µ–∂–¥–∞ + —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è) –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–µ.
                </p>
            </header>

            <div class="page-content">
                <div class="editor-layout">
                    <!-- Left: Edit Panel -->
                    <div class="panel">
                        <div class="panel-title">
                            <span class="panel-title-icon">üëî</span>
                            <span>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –û–±—Ä–∞–∑–∞</span>
                        </div>

                        <form id="look-form">
                            <!-- Cover Image Upload -->
                            <!-- Collage Preview (Auto-generated) -->
                            <div class="form-group full" style="margin-bottom: 20px;">
                                <label>–ü—Ä–µ–≤—å—é –æ–±—Ä–∞–∑–∞ (–ê–≤—Ç–æ-–∫–æ–ª–ª–∞–∂)</label>
                                <div id="collage-container"
                                    style="background: var(--color-bg); border: 1px solid var(--color-border); border-radius: var(--radius-md); padding: 12px; height: 300px; display: flex; align-items: center; justify-content: center; overflow: hidden;">
                                    <div id="collage-placeholder"
                                        style="color: var(--color-text-muted); text-align: center;">
                                        <div>–î–æ–±–∞–≤—å—Ç–µ –ø—Ä–µ–¥–º–µ—Ç—ã –æ–¥–µ–∂–¥—ã —Å —Ñ–æ—Ç–æ,</div>
                                        <div>—á—Ç–æ–±—ã —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–ª–∞–∂</div>
                                    </div>
                                    <img id="collage-preview-img"
                                        style="display: none; max-width: 100%; max-height: 100%; object-fit: contain; box-shadow: var(--shadow-lg);">
                                </div>
                            </div>

                            <div class="form-grid">
                                <div class="form-group full">
                                    <label for="look-label">–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—Ä–∞–∑–∞</label>
                                    <input type="text" id="look-label"
                                        placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Summer Denim, Corporate Chic">
                                </div>

                                <div class="form-group">
                                    <label for="look-category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                                    <select id="look-category">
                                        <!-- Populated via JS -->
                                    </select>
                                </div>

                                <!-- Items Section -->
                                <div class="form-group full">
                                    <label>–≠–ª–µ–º–µ–Ω—Ç—ã –æ–¥–µ–∂–¥—ã</label>
                                    <div id="items-list" class="items-container">
                                        <!-- Items will appear here -->
                                    </div>
                                    <div id="btn-add-item" class="add-item-zone" style="margin-top: 12px;">
                                        + –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç –æ–¥–µ–∂–¥—ã
                                    </div>
                                </div>

                                <!-- Prompt Overrides (Optional) -->
                                <div class="form-group full"
                                    style="margin-top: 24px; padding-top: 16px; border-top: 1px solid var(--color-border);">
                                    <div
                                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                        <label>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (Prompt)</label>
                                        <span
                                            style="font-size: 11px; color: var(--color-text-muted);">–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ</span>
                                    </div>
                                    <textarea id="look-prompt-tech"
                                        placeholder="–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –æ–¥–µ–∂–¥—ã (materials, fit, details)..."
                                        style="min-height: 80px; font-family: monospace; font-size: 12px;"></textarea>
                                </div>
                            </div>

                            <div class="form-actions" style="margin-top: 24px; display: flex; gap: 12px;">
                                <button type="submit" class="btn btn-primary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±—Ä–∞–∑</button>
                                <button type="button" id="btn-clear" class="btn btn-secondary">–û—á–∏—Å—Ç–∏—Ç—å</button>
                                <button type="button" id="btn-delete" class="btn btn-secondary"
                                    style="margin-left: auto; color: #EF4444; display: none;">–£–¥–∞–ª–∏—Ç—å</button>
                            </div>
                        </form>
                    </div>

                    <!-- Right: Gallery -->
                    <div class="panel">
                        <div class="panel-title">
                            <span class="panel-title-icon">üìö</span>
                            <span>–ö–∞—Ç–∞–ª–æ–≥ –û–±—Ä–∞–∑–æ–≤</span>
                        </div>

                        <div id="looks-gallery"
                            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 16px;">
                            <!-- Gallery items -->
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Item Modal -->
    <div id="item-modal" class="modal-overlay" style="display: none;">
        <div class="modal-card">
            <h3 style="margin-bottom: 16px;">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç</h3>
            <div class="form-group full" style="margin-bottom: 16px;">
                <label>–§–æ—Ç–æ –ø—Ä–µ–¥–º–µ—Ç–∞</label>
                <label>–§–æ—Ç–æ –ø—Ä–µ–¥–º–µ—Ç–∞ (–º–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ)</label>

                <!-- Thumbnails container -->
                <div id="item-images-list" style="display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 8px;">
                    <!-- Populated by JS -->
                </div>

                <!-- Add Button -->
                <div id="item-image-zone" class="add-item-zone"
                    style="height: 60px; display: flex; align-items: center; justify-content: center; border-style: dashed;">
                    <div style="display: flex; gap: 8px; align-items: center;">
                        <span style="font-size: 18px;">üì∑</span>
                        <span style="font-size: 12px;">–î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ</span>
                    </div>
                    <input type="file" id="item-image-input" hidden accept="image/*" multiple>
                </div>
            </div>

            <div class="form-group" style="margin-bottom: 12px;">
                <label>–¢–∏–ø</label>
                <select id="item-type-select"
                    style="width: 100%; padding: 8px; background: var(--color-bg); border: 1px solid var(--color-border); color: var(--color-text); border-radius: 4px;">
                    <option value="top">–í–µ—Ä—Ö (Top)</option>
                    <option value="bottom">–ù–∏–∑ (Bottom)</option>
                    <option value="shoes">–û–±—É–≤—å (Shoes)</option>
                    <option value="accessory">–ê–∫—Å–µ—Å—Å—É–∞—Ä (Accessory)</option>
                    <option value="outerwear">–í–µ—Ä—Ö–Ω—è—è –æ–¥–µ–∂–¥–∞ (Outerwear)</option>
                    <option value="dress">–ü–ª–∞—Ç—å–µ/–ö–æ—Å—Ç—é–º (Full Body)</option>
                </select>
            </div>
            <div class="form-group" style="margin-bottom: 16px;">
                <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <input type="text" id="item-desc-input" placeholder="–ù–∞–ø—Ä: White cotton t-shirt"
                    style="width: 100%; padding: 8px; background: var(--color-bg); border: 1px solid var(--color-border); color: var(--color-text); border-radius: 4px;">
            </div>
            <div style="display: flex; gap: 8px; justify-content: flex-end;">
                <button id="btn-cancel-item" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                <button id="btn-confirm-item" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <script type="module" src="look-editor.js"></script>
</body>

</html>